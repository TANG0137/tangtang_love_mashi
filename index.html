<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å’Œæˆ‘ä¸€èµ·èµ°åˆ°æœ€åå§</title>

<style>
*{box-sizing:border-box;}
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui;
  color:#fff;
  background:
    radial-gradient(circle at top, rgba(255,255,255,.15), transparent 60%),
    linear-gradient(160deg,#1b1f3b,#0b0d1a);
}
#app{
  width:100%;
  max-width:380px;
  padding:24px;
  text-align:center;
}
button{
  margin-top:28px;
  padding:12px 32px;
  font-size:20px;
  background:none;
  border:1px solid rgba(255,255,255,.6);
  color:#fff;
}
.stage{
  margin-top:30px;
  min-height:300px;
  position:relative;
}

/* ---------- ç¬¬äºŒå…³ ---------- */
#puzzleArea{position:relative;height:260px;}
#target{
  position:absolute;
  left:50%;top:50%;
  transform:translate(-50%,-50%);
  width:140px;
}
#piece{
  position:absolute;
  left:20px;
  bottom:20px;
  width:120px;
  cursor:grab;
  touch-action:none;
}
#piece svg{width:100%;pointer-events:none;}

/* ---------- ç¬¬ä¸‰å…³ ---------- */
.person{
  position:absolute;
  cursor:pointer;
  user-select:none;
}

/* ---------- ç¬¬å››å…³ ---------- */
#book{
  border:4px solid rgba(255,255,255,.5);
  padding:100px;
  min-height:600px;
  font-size:18px;
  max-width:760px;
  margin:0 auto;
}

/* ---------- ç¬¬äº”å…³ ---------- */
#gift{
  font-size:64px;
  transition:transform .1s;
  user-select:none;
}


</style>
</head>

<body>

<!-- ğŸµ èƒŒæ™¯éŸ³æ¨‚ï¼ˆè«‹æ›æˆä½ çš„ HTTPS éŸ³æ¨‚ç¶²å€ï¼‰ -->
<audio id="bgm" src="123.mp3" loop></audio>

<div id="app"></div>

<script>
const app = document.getElementById("app");
const bgm = document.getElementById("bgm");

/* ========= å¯†ç å…¥å£ ========= */
const PASSWORD = "20250501"; // â† æ”¹æˆä½ å€‘çš„æš—è™Ÿ

function passwordGate(){
  app.innerHTML = `
    <p style="font-size:28px">
      è¾“å…¥æš—å·<br>
      æ‰èƒ½è§£é”ğŸ 
    </p>
    <input id="pwd" type="password"
      style="font-size:22px;padding:10px;width:80%;text-align:center;">
    <br>
    <button onclick="checkPassword()">è§£é”</button>
  `;
}

function checkPassword(){
  const val = document.getElementById("pwd").value;
  if(val === PASSWORD){
    bgm.volume = 0.5;
    bgm.play().catch(()=>{});
    stage1();
  }else{
    alert("å‚»å­è¿è¿™éƒ½ä¸çŸ¥é“ï¼Œè®°å¾—æˆ‘ä»¬çš„ç¬¬ä¸€æ¬¡å—?<br>202xxxxx");
  }
}

/* ---------- ç¬¬ä¸€å…³ ---------- */
function stage1(){
  app.innerHTML = `
    <p style="font-size:28px">
      å“¥ï¼Œæˆ‘ä»¬å·²ç»å¤„äº†åŠå¹´äº†<br>
      çŸ¥é“å—?<br>
      ä¸€è·¯ä¸Šè·Œè·Œæ’æ’çš„<br>
      æœ‰æ—¶å€™å¿ƒå¾ˆæ…Œæ‰‹è„‘å­å¾ˆä¹±<br>
å¾ˆç¬¨å§<br>
è°ˆæ‹çˆ±è°ˆå¾—ä¹±ä¸ƒå…«ç³Ÿçš„<br>
å“¥<br>
è°¢è°¢ä½ è¿™æ®µæ—¶é—´é™ªç€æˆ‘<br>
ä»¥åçš„è·¯<br>å†ç‰µç€ä½ çš„æ‰‹ä¸€èµ·èµ°<br>
å¥½å—?<br>
    </p>
    <button onclick="stage2()">å¥½</button>
  `;
}

/* ---------- ç¬¬äºŒå…³ ---------- */
function stage2(){
  app.innerHTML = `
    <div class="stage">
      <div id="puzzleArea">
        <svg id="target" viewBox="0 0 100 90">
          <path d="M50 85 C10 60,0 35,25 20
                   C40 10,50 25,50 25
                   C50 25,60 10,75 20
                   C100 35,90 60,50 85"
                fill="none" stroke="white"
                stroke-width="3" stroke-dasharray="6,6"/>
        </svg>
        <div id="piece">
          <svg viewBox="0 0 100 90">
            <path d="M50 85 C10 60,0 35,25 20
                     C40 10,50 25,50 25
                     C50 25,60 10,75 20
                     C100 35,90 60,50 85"
                  fill="crimson"/>
          </svg>
        </div>
      </div>
      <p style="font-size:24px">å”¯ä¸€å±äºä½ çš„ä½ç½®</p>
    </div>
  `;

  const piece = document.getElementById("piece");
  let dragging=false, sx=0, sy=0;

  piece.onpointerdown = e=>{
    dragging=true;
    sx=e.clientX-piece.offsetLeft;
    sy=e.clientY-piece.offsetTop;
    piece.setPointerCapture(e.pointerId);
  };
  piece.onpointermove = e=>{
    if(!dragging) return;
    piece.style.left=(e.clientX-sx)+"px";
    piece.style.top =(e.clientY-sy)+"px";
  };
  piece.onpointerup = ()=>{
    dragging=false;
    const rect=piece.getBoundingClientRect();
    if(Math.abs(rect.left+60-window.innerWidth/2)<40 &&
       Math.abs(rect.top+60-window.innerHeight/2)<40){
      app.innerHTML=`
        <p style="font-size:28px">
          ä½ æ˜¯æˆ‘å¿ƒé‡Œ<br>æœ€é‡è¦çš„ä¸€ç‰‡æ‹¼å›¾<br>æ²’æœ‰ä½ <br>æˆ‘å°†ä¸å†æ˜¯æˆ‘
        </p>
        <button onclick="stage3()">ç»§ç»­</button>
      `;
    }
  };
}

/* ---------- ç¬¬ä¸‰å…³ ---------- */
function stage3(){
  app.innerHTML=`
    <div class="stage" id="people" style="height:300px;"></div>
    <p style="font-size:24px">ç»å†è¿‡æ‰å¦‚æ­¤å¥¢æœ›</p>
  `;
  const box=document.getElementById("people");
  let people=[];
  const cx=box.clientWidth/2, cy=150;

  for(let i=0;i<20;i++){
    const p=document.createElement("div");
    const size=90;
    p.className="person";
    p.textContent="ğŸ§";
    p.style.fontSize=size+"px";
    p.style.left=(cx+Math.random()*300-150-size/2)+"px";
    p.style.top =(cy+Math.random()*300-150-size/2)+"px";
    p.onclick=()=>{
      p.remove();
      people=people.filter(x=>x!==p);
      if(people.length===2){
        app.innerHTML=`
          <p style="font-size:28px">
            åªæœ‰æˆ‘ä»¬ä¸¤äººçš„ä¸–ç•Œï¼Œ<br>
            æ˜¯æˆ‘æœ€å¹¸ç¦çš„äº‹
          </p>
          <button onclick="stage4()">ç»§ç»­</button>
        `;
      }
    };
    people.push(p);
    box.appendChild(p);
  }
}

/* ---------- ç¬¬å››å…³ ---------- */
function stage4(){
  let page=0;
  const pages=[
    "ä¸çŸ¥é“ä»ä½•æ—¶èµ·è¢«ä½ å£°éŸ³å¸å¼•ä½äº†<br>é‚£ä¹Ÿæˆäº†æˆ‘å¥”å‘ä½ çš„å¥‘æœº",
    "ä½ å’Œåˆ«äººåœ¨ä¸€èµ·åœ°åœºæ™¯<br>æˆ‘å‘ç°<br>åŸæ¥æˆ‘çš„å¿ƒè¿™ä¹ˆè„†å¼±",
    "æ¯ä¸€æ¬¡çš„äº‰åµ<br>æ¯ä¸€æ¬¡åœ°ç¦»å¼€<br>æˆ‘æ‰çŸ¥é“<br>æˆ‘å·²ç»æ²¡åŠæ³•å¤±å»ä½ äº†",
    " ",
    "åé¢çš„æ•…äº‹ï¼Œ<br>æˆ‘ä»¬ä¸€èµ·ä¹¦å†™å¥½å—?"
  ];
  app.innerHTML=`
    <div id="book">${pages[0]}</div>
    <button id="next">ç¿»é¡µ</button>
  `;
  document.getElementById("next").onclick=()=>{
    page++;
    if(page<pages.length){
      document.getElementById("book").innerHTML=pages[page];
    }else{
      stage5();
    }
  };
}

/* ---------- ç¬¬äº”å…³ ---------- */
function stage5(){
  app.innerHTML=`
    <div class="stage">
      <div id="gift">ğŸ</div>
      <p style="font-size:24px">æ’¸ä»– èµ¶ç´§çš„</p>
    </div>
  `;
  const gift=document.getElementById("gift");
  let startY=null, moves=0, scale=1, acc=0;
  const threshold=10;

  document.onpointerdown=e=>startY=e.clientY;
  document.onpointermove=e=>{
    if(startY===null) return;
    acc+=Math.abs(e.clientY-startY);
    startY=e.clientY;
    while(acc>=threshold){
      moves++;
      scale+=0.002;
      acc-=threshold;
    }
    gift.style.transform=`scale(${scale})`;
    if(moves>=300){
      app.innerHTML="<h1>é©¬é€‚ï¼Œåœ£è¯å¿«ä¹<br>æˆ‘çˆ±ä½  ğŸ„</h1>";
      document.onpointerdown=null;
      document.onpointermove=null;
    }
  };
  document.onpointerup=()=>startY=null;
}

/* ========= å¯åŠ¨ ========= */
passwordGate();
</script>
</body>
</html>
